<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }}</title>
		<meta name="description" content="{{ description or metadata.description }}">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">

		{#- Uncomment this if you’d like folks to know that you used Eleventy to build your site!  #}
		{#- <meta name="generator" content="{{ eleventy.generator }}"> #}

		{#-
		Plain-text bundles are provided via the `eleventy-plugin-bundle` plugin:
		1. CSS:
			* Add to a per-page bundle using `{% css %}{% endcss %}`
			* Retrieve bundle content using `{% getBundle "css" %}` or `{% getBundleFileUrl "css" %}`
		2. Or for JavaScript:
			* Add to a per-page bundle using `{% js %}{% endjs %}`
			* Retrieve via `{% getBundle "js" %}` or `{% getBundleFileUrl "js" %}`
		3. Learn more: https://github.com/11ty/eleventy-plugin-bundle
		#}

		{#- Add CSS to the bundle #}
		<style>/* This is an arbitrary CSS string added to the bundle */</style>

		{#- Add the contents of a file to the bundle #}
		<style>{% include "css/index.css" %}</style>

		{#- Or you can add from node_modules #}
		{# <style>{% include "node_modules/something.css" %}</style> #}

		{#- Render the CSS bundle using inlined CSS (for the fastest site performance in production) #}
		<style>{% getBundle "css" %}</style>

		{#- Renders the CSS bundle using a separate file, if you can't set CSP directive style-src: 'unsafe-inline' #}
		{#- <link rel="stylesheet" href="{% getBundleFileUrl "css" %}"> #}

		{#- Add the heading-anchors web component to the JavaScript bundle #}
		<script type="module">{% include "node_modules/@zachleat/heading-anchors/heading-anchors.js" %}</script>
	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

	<header>
  <h1 class="home">
    <a href="/">
      <img src="/img/mount-purpose-logo.png" alt="Mount Purpose" class="logo-light" style="height: 40px; width: auto;">
      <img src="/img/mount-purpose-logo-darkmode.png" alt="Mount Purpose" class="logo-dark" style="height: 40px; width: auto;">
    </a>
  </h1>

			{#- Read more about `eleventy-navigation` at https://www.11ty.dev/docs/plugins/navigation/ #}
		<nav>
	<h2 class="visually-hidden">Top level navigation menu</h2>
	<ul class="nav">
		<li class="nav-item"><a href="/"{% if page.url == "/" %} aria-current="page"{% endif %}>Home</a></li>
		<li class="nav-item"><a href="/about/"{% if page.url == "/about/" %} aria-current="page"{% endif %}>About</a></li>
		<li class="nav-item"><a href="/connect/"{% if page.url == "/connect/" %} aria-current="page"{% endif %}>Connect</a></li>
		<li class="nav-item"><a href="/events/"{% if page.url.startsWith("/events") %} aria-current="page"{% endif %}>Events & Media</a></li>
	</ul>
</nav>
		</header>

		<main id="main">
			<heading-anchors>
				{{ content | safe }}
			</heading-anchors>
		</main>

		<footer>
			<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2em; margin-bottom: 2em;">
				<!-- About Column -->
				<div>
					<h3 style="font-size: 1rem; margin-top: 0; margin-bottom: 0.5em; color: var(--color-accent);">Mount Purpose</h3>
					<p style="font-size: 0.9rem; line-height: 1.5; margin: 0;">Guiding leaders through transformational journeys from success to significance.</p>
				</div>
				
				<!-- Navigation Column -->
				<div>
					<h3 style="font-size: 1rem; margin-top: 0; margin-bottom: 0.5em; color: var(--color-accent);">Navigate</h3>
					<ul style="list-style: none; padding: 0; margin: 0; font-size: 0.9rem; line-height: 2;">
						<li><a href="/">Home</a></li>
						<li><a href="/about/">About</a></li>
						<li><a href="/connect/">Connect</a></li>
						<li><a href="/events/">Events & Media</a></li>
						<li><a href="/blog/">Archive</a></li>
					</ul>
				</div>
				
				<!-- Contact Column -->
				<div>
					<h3 style="font-size: 1rem; margin-top: 0; margin-bottom: 0.5em; color: var(--color-accent);">Connect</h3>
					<p style="font-size: 0.9rem; line-height: 1.8; margin: 0;">
						<a href="mailto:connect@mountpurpose.com">connect@mountpurpose.com</a><br>
						<a href="https://www.linkedin.com/in/davidall/" target="_blank" rel="noopener">LinkedIn</a><br>
						<a href="/feed/feed.xml">RSS Feed</a>
					</p>
				</div>
				
				<!-- Newsletter Column -->
				<div>
					<h3 style="font-size: 1rem; margin-top: 0; margin-bottom: 0.5em; color: var(--color-accent);">Stay Connected</h3>
					<form id="footer-newsletter-form" style="display: flex; flex-direction: column; gap: 0.5em;">
						<input type="email" name="email" placeholder="Your email" required style="padding: 0.5em; border: 1px solid var(--color-border); border-radius: 4px; font-family: var(--font-family); font-size: 0.9rem; background-color: var(--background-secondary);">
						<button type="submit" style="padding: 0.5em 1em; background-color: var(--color-accent); color: var(--background-color); border: none; border-radius: 4px; font-family: var(--font-family); font-size: 0.9rem; font-weight: 600; cursor: pointer;">Subscribe</button>
					</form>
					<p id="footer-form-message" style="margin: 0.5em 0 0 0; font-size: 0.8rem; display: none;"></p>
				</div>
			</div>
			
			<!-- Copyright Bar -->
			<div style="border-top: 1px solid var(--color-border); padding-top: 1.5em; margin-top: 1.5em; text-align: center; font-size: 0.85rem; color: var(--text-color-secondary);">
				<p style="margin: 0;">© 2025 Mount Purpose. All rights reserved.</p>
				<p style="margin: 0.5em 0 0 0;"><em>Built with <a href="https://www.11ty.dev/">Eleventy</a></em></p>
			</div>
		</footer>

		<!-- Footer Newsletter Script -->
		<script>
		document.getElementById('footer-newsletter-form').addEventListener('submit', async function(e) {
			e.preventDefault();
			
			const form = e.target;
			const button = form.querySelector('button');
			const message = document.getElementById('footer-form-message');
			const email = form.querySelector('[name="email"]').value;
			
			button.disabled = true;
			button.textContent = 'Subscribing...';
			message.style.display = 'none';
			
			try {
				const response = await fetch('https://a.klaviyo.com/client/subscriptions/?company_id=U5CBFS', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'revision': '2024-07-15'
					},
					body: JSON.stringify({
						data: {
							type: 'subscription',
							attributes: {
								profile: {
									data: {
										type: 'profile',
										attributes: {
											email: email
										}
									}
								},
								custom_source: 'Mount Purpose Website Footer'
							},
							relationships: {
								list: {
									data: {
										type: 'list',
										id: 'TJh6ev'
									}
								}
							}
						}
					})
				});
				
				if (response.ok || response.status === 202) {
					message.textContent = '✓ Subscribed!';
					message.style.color = 'var(--color-accent)';
					message.style.display = 'block';
					form.reset();
				} else {
					throw new Error('Subscription failed');
				}
			} catch (error) {
				message.textContent = 'Error. Try again.';
				message.style.color = '#c5534f';
				message.style.display = 'block';
			} finally {
				button.disabled = false;
				button.textContent = 'Subscribe';
			}
		});
		</script>

		<!-- This page `{{ page.url }}` was built on {% currentBuildDate %} -->
		<script type="module" src="{% getBundleFileUrl "js" %}"></script>
		<!-- This page `{{ page.url }}` was built on {% currentBuildDate %} -->
		<script type="module" src="{% getBundleFileUrl "js" %}"></script>
		
		<!-- Klaviyo Tracking -->
		<script async type='text/javascript' src='https://static.klaviyo.com/onsite/js/U5CBFS/klaviyo.js?company_id=U5CBFS'></script>
		<script type="text/javascript"> 
		//Initialize Klaviyo object on page load
		!function(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get:function(n,i){return"push"===i?function(){var n;(n=window._klOnsite).push.apply(n,arguments)}:function(){for(var n=arguments.length,o=new Array(n),w=0;w<n;w++)o[w]=arguments[w];var t="function"==typeof o[o.length-1]?o.pop():void 0,e=new Promise((function(n){window._klOnsite.push([i].concat(o,[function(i){t&&t(i),n(i)}]))}));return e}}})}catch(n){window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){var n;(n=window._klOnsite).push.apply(n,arguments)}}}}(); 
		</script>
	</body>
</html>
	</body>
</html> 
